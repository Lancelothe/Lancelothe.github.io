---
title: 位运算
date: 2018-10-30 21:08:44
categories:
  - 位运算
tags:
  - 位运算
---
## Bit，Byte，Word，Dword，Qword
bit，通常指一个二进制位，
八个比特(Bit)称为一个字节（Byte），两个字节称为一个字（Word），两个字称为一个双字（Dword），两个双字称为一个四字（Qword）。

类型范围
最大负数：10000000 00000000 00000000 00000000
最大正数：01111111 11111111 11111111 11111111

## 原码 反码 补码
**原码：** 将一个数字转换成二进制就是这个数值的原码。
```
int a =  5;  //原码  0000 0000 0000 0101
int b = -3;  //原码  1000 0000 0000 0011
```
**反码：**
分两种情况：正数和负数
- 正数：正数的反码就是原码。
- 负数：负数的反码是在原码的基础上，符号位不变 其它位都取反。
```
5 的原码：0000 0000 0000 0101
5 的反码：0000 0000 0000 0101
-3 的原码：1000 0000 0000 0011
-3 的反码：1111 1111 1111 1100
```

**补码:**
仍然分正数和负数两种情况

- 正数： 正数的补码就是原码。
- 负数： 负数的补码在反码的基础上加1。
```
5 的反码：0000 0000 0000 0101
5 的补码：0000 0000 0000 0101

-3 的反码：1111 1111 1111 1100
-3 的补码: 1111 1111 1111 1101
```
其实负数的：
十进制变二进制：原码--反码--加一（补码）；
二进制变十进制：减一--反码--原码。


## 位运算符
### & 与运算符
规则： 从高到低，两个数的对应bit位相与，两个位都为 1 时，结果才为 1，否则为0。
```
3的二进制：0000 0011
&
5的二进制：0000 0101
=
0000 0001
所以
3 & 5 = 1
PS : 因为是整数高位为0，所以均省略。
```

### | 或运算符
规则： 从高到低，两个数的对应bit位相或，两个位都是 0 时，结果才为 0，否则为1。
```
3的二进制：0000 0011
|
5的二进制：0000 0101
=
0000 0111
所以
3 | 5 = 7
```

### ~ 取反运算符
规则： 从高到低，0 变 1，1 变 0。
```
3的二进制：0000 0011
~3 的二进制：1111111 11111111 11111111 111111100
所以
~3 = -4
-5的二进制：0000 0101
~-5的二进制：00000000 00000000 00000000 00000100
所以
~-5 = 4
```

### ^ 异或运算符
规则： 从高到低，两个数的对应bit位相异或，两个位相同时为 0，相异为 1，相同为0。
```
3的二进制：0000 0011
^
5的二进制：0000 0101
=
0000 0110
所以
3 ^ 5 = 6
值得注意的是 3 ^ 5 = 6,而 6 ^ 5 = 3
所以交换两个变量可以用异或。
```

### >> 右移运算符
规则： a >> b 将数值 a 的二进制数值从 0 位算起到第 b - 1 位，整体向右方向移动 b 位，符号位不变，高位空出来的位补数值 0。
- 正数：
```
16的二进制：0001 0000
16 >> 2
=
0000 0100
所以
16 >> 2 = 4
```
- 负数：
```
-16的二进制：11111111 11111111 11111111 11110000
-16 >> 2
=
11111111 11111111 11111111 11111100
所以
-16 >> 2 = -4
```

### << 左移运算符
规则： a << b 将数值 a 的二进制数值从 0 位算起到第 b - 1 位，整体向左方向移动 b 位，符号位不变，低位空出来的位补数值 0。
- 正数：
```
1的二进制：0000 0001
1 << 3
=
0001000
所以
1 << 3 = 8 = 1 * 2的3次幂
```
- 负数：
```
-2的二进制：11111111 11111111 11111111 11111110
-2 << 3
=
11111111 11111111 11111111 11110000
所以
-2 << 3 = -8
```

### >>> 无符号右移运算符
规则： 与右移不同的是，负数右移时，高位补0。
- 正数：和普通右移无区别。
- 负数：
```
-2的二进制：11111111 11111111 11111111 11111110
-2 >>> 3
=
00011111 11111111 11111111 11111111
所以
-2 >>> 3 = 536870911
```

### 移位操作说明
- 正数左移N位表示乘以2的N次幂，右移N位表示除以2的N次幂；
- 负数移位最高位符号位不变，规则同上。
- 整型最大值向左移位会越位到负值，因为低位补0了
- 整型最小值左移会变成0，因为原来是最高位是1，其余是0，左移则全为0


```Java
int x = Integer.MAX_VALUE << 1;
// int x = Integer.MIN_VALUE << 1;
// 整型的二进制字符串
String y = Integer.toBinaryString(x);
// 将二进制字符串用大整数类型存储，基本类型范围不够容纳
BigInteger z = new BigInteger(y);
System.out.println("十进制：" + x);
System.out.println("二进制字符串：" +y);
System.out.println("二进制大整数：" +z);
System.out.println("二进制大整数补齐32位：" + String.format("%032d", z));
```
